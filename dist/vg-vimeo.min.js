!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(1),angular.module("videogular.plugins.vimeo",[]).directive("vgVimeo",["VG_STATES",function(e){return{restrict:"A",require:"^videogular",link:function(t,n,a,i){function r(e){var t=/^.+vimeo.com\/(.*\/)?([^#\?]*)/,n=e.match(t);return n?n[2]||n[1]:null}function o(){var e=new CustomEvent("loadedmetadata");i.mediaElement[0].dispatchEvent(e)}function s(){Object.defineProperties(i.mediaElement[0],{currentTime:{get:function(){return h},set:function(e){h=e,d.vimeo("seekTo",e)}},duration:{get:function(){return f}},paused:{get:function(){return p}},videoWidth:{get:function(){return m}},videoHeight:{get:function(){return v}},volume:{get:function(){return g},set:function(e){g=e,d.vimeo("setVolume",e)}}}),i.mediaElement[0].play=function(){d.vimeo("play")},i.mediaElement[0].pause=function(){d.vimeo("pause")},d.vimeo("getVolume",function(e){g=e,i.onVolumeChange()}).vimeo("getCurrentTime",function(e){h=e,o()}).vimeo("getDuration",function(e){f=e,o()})}function u(e){var t=null!==a.vgVimeo?a.vgVimeo.split(";"):null,n={api:1,player_id:"vimeoplayer",autoplay:!1,loop:!1};t&&t.forEach(function(e){var t=e.split("=");n.hasOwnProperty(t[0])&&(n[t[0]]=t[1]||0)});var i=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&");return $("<iframe>",{src:"//player.vimeo.com/video/"+e+"?"+i,frameborder:0,scrolling:"no"}).css({width:"100%",height:"100%"})}function c(){d.on("ready",function(){s()}).on("play",function(){p=!1;var t=new CustomEvent("playing");i.mediaElement[0].dispatchEvent(t),i.setState(e.PLAY)}).on("pause",function(){p=!0;var t=new CustomEvent("pause");i.mediaElement[0].dispatchEvent(t),i.setState(e.PAUSE)}).on("finish",function(){i.onComplete()}).on("playProgress",function(e,t){h=t.seconds,f=t.duration,i.onUpdateTime({target:i.mediaElement[0]})})}function l(e){if(!e)return void(d&&d.destroy());var t=r(e);t&&(d=u(t),$(i.mediaElement[0]).replaceWith(d),c(d))}var d,m,v,h,f,p,g;t.$watch(function(){return i.sources},function(e,t){l(e&&e.length>0&&e[0].src?e[0].src.toString():null)})}}}])},function(e,t){!function(e,t){var n={catchMethods:{methodreturn:[],count:0},init:function(t){var n,a,i;t.originalEvent.origin.match(/vimeo/gi)&&"data"in t.originalEvent&&(i="string"===e.type(t.originalEvent.data)?e.parseJSON(t.originalEvent.data):t.originalEvent.data,i&&(n=this.setPlayerID(i),n.length&&(a=this.setVimeoAPIurl(n),i.hasOwnProperty("event")&&this.handleEvent(i,n,a),i.hasOwnProperty("method")&&this.handleMethod(i,n,a))))},setPlayerID:function(t){return e("iframe[src*="+t.player_id+"]")},setVimeoAPIurl:function(e){return"http"!==e.attr("src").substr(0,4)?"https:"+e.attr("src").split("?")[0]:e.attr("src").split("?")[0]},handleMethod:function(e,t,n){this.catchMethods.methodreturn.push(e.value)},handleEvent:function(t,n,a){switch(t.event.toLowerCase()){case"ready":for(var i in e._data(n[0],"events"))i.match(/loadProgress|playProgress|play|pause|finish|seek|cuechange/)&&n[0].contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:i}),a);if(n.data("vimeoAPICall")){for(var r=n.data("vimeoAPICall"),o=0;o<r.length;o++)n[0].contentWindow.postMessage(JSON.stringify(r[o].message),r[o].api);n.removeData("vimeoAPICall")}n.data("vimeoReady",!0),n.triggerHandler("ready");break;case"seek":n.triggerHandler("seek",[t.data]);break;case"loadprogress":n.triggerHandler("loadProgress",[t.data]);break;case"playprogress":n.triggerHandler("playProgress",[t.data]);break;case"pause":n.triggerHandler("pause");break;case"finish":n.triggerHandler("finish");break;case"play":n.triggerHandler("play");break;case"cuechange":n.triggerHandler("cuechange")}}},a=e.fn.vimeoLoad=function(){var t=e(this).attr("src"),n=!1;if("https:"!==t.substr(0,6)&&(t="http"===t.substr(0,4)?"https"+t.substr(4):"https:"+t,n=!0),null===t.match(/player_id/g)){n=!0;var a=t.indexOf("?")===-1?"?":"&",i=e.param({api:1,player_id:"vvvvimeoVideo-"+Math.floor(1e7*Math.random()+1).toString()});t=t+a+i}return n&&e(this).attr("src",t),this};jQuery(document).ready(function(){e("iframe[src*='vimeo.com']").each(function(){a.call(this)})}),e(["loadProgress","playProgress","play","pause","finish","seek","cuechange"]).each(function(t,a){jQuery.event.special[a]={setup:function(t,i,r){var o=e(this).attr("src");if(e(this).is("iframe")&&o.match(/vimeo/gi)){var s=e(this);if("undefined"!=typeof s.data("vimeoReady"))s[0].contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:a}),n.setVimeoAPIurl(e(this)));else{var u="undefined"!=typeof s.data("vimeoAPICall")?s.data("vimeoAPICall"):[];u.push({message:a,api:n.setVimeoAPIurl(s)}),s.data("vimeoAPICall",u)}}}}}),e(t).on("message",function(e){n.init(e)}),e.vimeo=function(e,a,i){var r={},o=n.catchMethods.methodreturn.length;if("string"==typeof a&&(r.method=a),void 0!==typeof i&&"function"!=typeof i&&(r.value=i),e.is("iframe")&&r.hasOwnProperty("method"))if(e.data("vimeoReady"))e[0].contentWindow.postMessage(JSON.stringify(r),n.setVimeoAPIurl(e));else{var s=e.data("vimeoAPICall")?e.data("vimeoAPICall"):[];s.push({message:r,api:n.setVimeoAPIurl(e)}),e.data("vimeoAPICall",s)}return"get"!==a.toString().substr(0,3)&&"paused"!==a.toString()||"function"!=typeof i||(!function(e,a,i){var r=t.setInterval(function(){n.catchMethods.methodreturn.length!=e&&(t.clearInterval(r),a(n.catchMethods.methodreturn[i]))},10)}(o,i,n.catchMethods.count),n.catchMethods.count++),e},e.fn.vimeo=function(t,n){return e.vimeo(this,t,n)}}(jQuery,window)}]);